---
title: "[BOJ][Python] ë°±ì¤€ 1033 ë²ˆ: ì¹µí…Œì¼"
excerpt: "[BOJ][Python] ë°±ì¤€ 1033 ë²ˆ: ì¹µí…Œì¼"

categories:
  - ps
tags:
  - [ë°±ì¤€, BOJ]

toc: true
toc_sticky: true

date: 2024-03-08
last_modified_at: 2024-03-08
---

> 1ì¼ 1PS 70ì¼ì°¨!

# ğŸ“š ë¬¸ì œ

---

> ê³¨ë“œ 2
> [ì¹µí…Œì¼](https://www.acmicpc.net/problem/1033)

# ğŸ’¡ í’€ì´ ê³¼ì •

---

- N-1 ê°œì˜ ë¹„ìœ¨ì´ ì£¼ì–´ì§€ê³  ì „ì²´ì˜ ë¹„ìœ¨ì„ ì•Œì•„ë‚¸ë‹¤.
    
    5

    4 0 1 1

    4 1 3 1

    4 2 5 1

    4 3 7 1

    ì…ë ¥ì— ëŒ€í•´ì„œ

    [a, b, c, d, e]

    1 * e = 1 * a

    1 * e = 3 * b

    1 * e = 5 * c

    1 * e = 7 * d

5ê°œì˜ ë°©ì •ì‹ì„ í†µí•´ a+b+c+d+e ê°€ ì •ìˆ˜ê°€ ë˜ëŠ” ê°€ì¥ ì‘ì€ ê°’ì„ ì°¾ëŠ” ë¬¸ì œì´ë‹¤.

- í•´ë‹¹ ë¬¸ì œëŠ” N - 1 ê°œì˜ ê°„ì„ ìœ¼ë¡œ N ê°œì˜ ë…¸ë“œê°€ ì—°ê²°ë˜ëŠ” ê·¸ë˜í”„ë¡œ ë³¼ ìˆ˜ ìˆë‹¤.
- ë”°ë¼ì„œ 0 ë²ˆì„ ê¸°ì¤€ìœ¼ë¡œ ê·¸ë˜í”„ë¥¼ ìƒì„±í•˜ê³ , ê·¸ë˜í”„ì— ì§ì ‘ ì—°ê²°ë  ìˆ˜ ìˆëŠ” ê°„ì„ ë“¤ì„ í™•ì¸í•œë‹¤.
- í•´ë‹¹ ê°„ì„ ì—ì„œ ê·¸ë˜í”„ì˜ ë…¸ë“œì™€ ìƒˆë¡œìš´ ë…¸ë“œê°€ q : p ì˜ ì •ìˆ˜ ë¹„ìœ¨ì„ ê°€ì§€ë©´ì„œ ìµœì†Œ ì •ìˆ˜ì´ê¸° ìœ„í•´ì„œ math.lcm(rate[a], p) ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì‚¼ëŠ”ë‹¤.
    - math.lcm(rate[a], p) : math.lcm(rate[a], p)  * q // p ë¡œ ë¹„ìœ¨ì„ ë§ì¶˜ë‹¤.
    - ê·¸ë˜í”„ ë…¸ë“œìª½ì´ math.lcm(rate[a], p) ê°€ ê³±í•´ì¡Œê¸°ì— ê·¸ë˜í”„ ì „ì²´ì— ê¸°ì¡´ ë¹„ìœ¨ì„ ë§ì¶”ê¸° ìœ„í•´ math.lcm(rate[a], p) ë¥¼ ê³±í•´ì¤€ë‹¤. 
- ì´í›„ í•´ë‹¹ ê°„ì„ ë„ ê·¸ë˜í”„ì— ì¶”ê°€í•œë‹¤. 

# ğŸ“Œí¬ì¸íŠ¸

---

- (0, 4), (1, 2), (3, 4) ...
    - í•´ë‹¹ ìˆœì„œëŒ€ë¡œ ê°„ì„ ì´ ì…ë ¥ë˜ì—ˆë‹¤ë©´ (1, 2) ëŠ” ê·¸ë˜í”„ì™€ ì§ì ‘ ì—°ê²°ë˜ì§€ ì•ŠëŠ”ë‹¤.
    - ë”°ë¼ì„œ ì •ë ¬ ë°©ë²•ì„ ë‹¤ì‹œ ìƒê°í•˜ê¸°ë³´ë‹¤ëŠ” N ì˜ ìµœëŒ€ê°€ 10ì´ë¯€ë¡œ queue ì˜ ê°€ì¥ ë’·ë¶€ë¶„ìœ¼ë¡œ ë³´ë‚´ì¤¬ë‹¤.


# ğŸ’» ì½”ë“œ

---


{% raw %}

```

import math
import sys
from collections import deque

input = sys.stdin.readline

N = int(input())

ingredients = deque()
rate = [0] * N

# 0 ë²ˆ ì¬ë£Œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì„¤ì •í•œë‹¤.
rate[0] = 1
graph = {}

# a < b ì´ë„ë¡ ì„¤ì •
for _ in range(N - 1):
    a, b, p, q = map(int, input().split())
    if a > b:
        ingredients.append([b, a, q, p])
    else:
        ingredients.append([a, b, p, q])

# ì˜¤ë¦„ì°¨ìˆœ ìˆœì„œëŒ€ë¡œ ì •ë ¬
# 0 ê³¼ ì—°ê²°ëœ ê²ƒë¶€í„° ì‹œì‘í•´ì„œ í•­ìƒ ì—°ê²°ëœ ì¬ë£Œë“¤ë§Œ ë‚˜ì˜¨ë‹¤.
sorted(ingredients, key=lambda x: (x[0], x[1]))

while ingredients:
    a, b, p, q = ingredients.popleft()

    # ë§Œì•½ ì—°ê²°ë  ìš”ì†Œê°€ ì—†ìœ¼ë©´ queue ì˜ ê°€ì¥ ë’¤ë¡œ ë³´ë‚¸ë‹¤.
    if rate[a] == 0 and rate[b] == 0:
        ingredients.append([a, b, p, q])
        continue
        
    # a ê°€ ì´ë¯¸ ì—°ê²°ëœ ì¬ë£Œê°€ ë˜ë„ë¡ ë³€ê²½í•œë‹¤.
    if rate[a] == 0:
        a, b = b, a
        p, q = q, p

    # p, q ì˜ ë¹„ìœ¨ì„ ì„œë¡œì†Œë¡œ ë§Œë“ ë‹¤.
    r = math.gcd(p, q)
    p //= r
    q //= r

    # ë°°ìˆ˜ë¼ë©´ ê·¸ëŒ€ë¡œ ì ìš©
    if rate[a] % p == 0:
        rate[b] = (rate[a] // p) * q
    # ë°°ìˆ˜ê°€ ì•„ë‹ˆë¼ë©´ a ê°€ (a, p) ì˜ ìµœì†Œ ê³µë°°ìˆ˜ê°€ ë˜ë„ë¡ ë§Œë“¤ì–´ì•¼í•œë‹¤.
    # ê·¸ë¦¬ê³  ê³±í•œ ìˆ˜ c ë¥¼ a ì™€ ì—°ê²°ëœ ëª¨ë“  ìˆ«ìë“¤ì— ê³±í•´ì£¼ì–´ì•¼í•œë‹¤.
    else:
        # a ì™€ ê´€ë ¨ëœ ìˆ˜ë“¤ì— ê³±í•´ì•¼í•  ìˆ˜.
        c = math.lcm(rate[a], p) // rate[a]
        rate[a] *= c
        rate[b] = rate[a] * q // p

        # dfs
        visited = [False] * N
        visited[a] = True
        stack = []
        stack.append(a)
        while stack:
            node = stack.pop()
            if node not in graph:
                continue
            for next_node in graph[node]:
                if visited[next_node]:
                    continue
                stack.append(next_node)
                visited[next_node] = True
                rate[next_node] *= c

    #ì‘ì„±ì´ ëë‚˜ë©´ graph ì— ì¶”ê°€
    if a not in graph:
        graph[a] = []
    if b not in graph:
        graph[b] = []

    graph[a].append(b)
    graph[b].append(a)

print(*rate,sep=" ")

```

{% endraw %}
